<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundation for Sites</title>
    <link rel="stylesheet" href="../assets/css/app.css">
    <link href="../assets/prism/prism.css" rel="stylesheet" />
    <link href="../assets/prism/prismoverride.css" rel="stylesheet" />
    <link href="../assets/theme/lessons.css" rel="stylesheet"/>

   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   
    <script>
        $(document).ready(function () {
            $("#tutorial_petstoretest").addClass("is-active");
            console.log("hello");
        });
    </script>
</head>

<body class="docpage">
 
    <div class=bigcenter-outter>

        <div class=bigcenter-inner>
            <div id="bg-fill-1" style="position:fixed;top: 0px; background-color:#181525;; height: 100vh; width: 100vw; z-index: initial;"></div>
            <div id="bg-fill-2" style="position:fixed;top: 129px; background-image: linear-gradient(#181525,#443d6e); height: calc(100vh - 120px); width: 100vw; z-index: initial;"></div>
            <div id="hacky-corner-cover" style="position:fixed;top: 129px; background-color:#181525; height: 34px; width: 100vw; z-index: 2;"></div><img id="bg-header-img" class="lz-r-banner-img" src="/assets/img/pic12.jpg"></img>
            <div id="hacky-corner-cover-2" style="position:fixed;top: 0px; background-color:#181525; height: 34px; width: 100vw; z-index: 2;"></div><img id="bg-header-img" class="lz-r-banner-img" src="/assets/img/pic12.jpg"></img>
            
            <div style="position: fixed;top:-36px;z-index: 4;">
                
                <!--
                <div style="position:relative;top:5px;left:30px; top: 4px;border: .125rem solid;border-radius: 13px;background-color: rgba(0, 0, 0, .71);padding: 6px 0px 2px 0px;">
                    <h1 style="font-size: 32px;color: rgba(180, 23, 186, 1);font-family: 'Arial Black', 'Arial Bold', Gadget, sans-serif;margin-left: 17px;margin-right: 17px;">LazyStack</h1>
                </div>
                -->
                
                <div class="cell shrink header medium-cell-block-container">
                    <div id="header-banner" style="position: relative;height:129px">
                    </div>
                    <div style="position:fixed;top:21px;left:16px;border: .125rem solid;border-radius: 13px;background-color: rgba(0, 0, 0, .71);padding: 6px 0px 2px 0px; max-width: 223px;">
                        <h1 style="font-size: 32px;color: rgba(180, 23, 186, 1);font-family: 'Arial Black', 'Arial Bold', Gadget, sans-serif;margin-left: 17px;margin-right: 17px;">LazyStack</h1>
                    </div>
                    
                </div>                <div class="title-bar lz-r-sitemenu hamburger" data-responsive-toggle="sitemenu-collapse"
                  data-hide-for="medium">
                  <button class="menu-icon" type="button" data-toggle></button>
                  <div class="title-bar-title" style="padding-left: 8px;">Tutorial</div>
                </div>
                
                <div class="top-bar fast lz-r-sitemenu dropdown outer" id="sitemenu-collapse" data-animate="slide-in-down slide-out-up">
                    <ul class="vertical medium-horizontal menu dropdown inner">
                
                      <li  id="index">
                        <a href="/index.html"><span class="">Home</span></a>
                      </li>
                
                      <li id="introdocs" >
                        <a href="/intro/intro.html">
                          <span class="">Introduction</span></a>
                      </li>
                
                      <li id="stacks">
                        <a href="/stacks/stacks_overview.html">
                          <span class="">Stacks</span>
                        </a>
                      </li>
                
                      <li id="clientsdkdocs">
                        <a href="/clientsdk/clientsdk_overview.html">
                          <span class="">ClientSDK</span>
                        </a>
                      </li>
                
                
                      <li id="installation">
                        <a href="/installation/installation_overview.html">
                          <span class="">Install</span>
                        </a>
                      </li>
                
                      <li id="tutorialdocs">
                        <a href="/tutorial/tutorial_overview.html">
                          <span class="lz-r-sectionitem">Tutorial</span>
                        </a>
                      </li>
                
                      <li id="libraries">
                        <a href="/libraries/libraries_overview.html">
                          <span class="">Libraries</span>
                        </a>
                      </li>
                
                
                      <li id="generatordocs">
                        <a href="/generator/generator_overview.html">
                            <span class="">Generator</span>
                        </a>
                      </li>
                
                
                    </ul>
                </div>            </div>
            <div class=lz-r-legal-notice style="max-width:1500px;">
                <div style="display:flex; width: 150px;justify-content: space-between;">
                    <a href="/privacy.html" class=text-item-L>Privacy</a>
                    <a href="/contactus.html" class=text-item-L>Contact Us!</a>
                </div>
                <p class=text-item-R>Â© 2021, Insight Sciences Corp or its affiliates. All rights reserved.</p>
            </div>            <!-- Note the body partial must be inserted at the leftmost column to avoid indent issue with code blocks -->
<div class="title-bar lz-r-topicmenu hamburger" data-responsive-toggle="topics-collapse" data-hide-for="medium">
    <button class="menu-icon" type="button" data-toggle></button>
    <div class="title-bar-title">PetStore Test</div>
</div>

<div class="top-bar fast lz-r-topicmenu dropdown outer" id="topics-collapse" data-animate="slide-in-down slide-out-up">
    <ul class="vertical menu dropdown">
        <li >
            <a  href="/tutorial/tutorial_overview.html">
                <span class="">Overview</span>
            </a>
        </li>

        <li >
            <a  href="/tutorial/tutorial_petstore.html">
                <span class="">1) PetStore</span>
            </a>
        </li>

        <li >
            <a  href="/tutorial/tutorial_controllers.html">
                <span class="">2) Implement Controllers</span>
            </a>
        </li>

        <li >
            <a  href="/tutorial/tutorial_configure01.html">
                <span class="">3) Configure LazyStack</span>
            </a>
        </li>
        
        <li >
            <a  href="/tutorial/tutorial_publishtoaws.html">
                <span class="">4) Publish to AWS</span>
            </a>
        </li>

        <li >
            <a  href="/tutorial/tutorial_testlocalwebapi.html">
                <span class="">5) Test Local WebApi</span>
            </a>
        </li>


        <li >
            <a  href="/tutorial/tutorial_petstoretest.html">
                <span class="lz-r-topicitem">6) PetStore Test</span>
            </a>
        </li>

        <li >
            <a  href="/tutorial/tutorial_consoleapp.html">
                <span class="">7) Console App</span>
            </a>
        </li>

        <li >
            <a  href="/tutorial/tutorial_xamarinapp.html">
                <span class="">8) Xamarin App</span>
            </a>
        </li>

        <li >
            <a  href="/tutorial/tutorial_blazorapp.html">
                <span class="">9) Blazor App</span>
            </a>
        </li>

    </ul>
</div>
<div class=lz-r-content>
    <h3>PetStoreTests Project</h3>
    <p>In this step we will create a PetStoreTest project to perform an integration test against the 
        PetStoreDev stack. We will test:</p>
    <ul>
        <li>Application SignUp - using the LazyStackAuth library. </li>
        <li>Application SignIn - using the LazyStackAuth library. </li>
        <li>Calling the stack using the PetStore - defined in the PetStoreClientSDK library.</li>
    </ul>
    
    <h4>Create PetStoreTests Project</h4>
    <ol>
        <li>Right Click on "Solution PetStore" in the Solution Explorer pane. The Context Menu appears.</li>
        <li>Select "Add &RightArrow; New Project" from the context menu. The "Add new project" dialog appears.</li>
        <li>Type "MSTEST Test Project (.NET Core)" into the search field. The project template is listed.</li>
        <li>Double Click on the template list item. The "Configure your project" dialog appears.</li>
        <li>Edit project name to read "PetStoreTests".</li>
        <li>Click the Create button. The test project is added to your solution.</li>
    </ol>
    
    <h4>Configure PetStoreTests Project</h4>
    <ol >
        <li>Add the following project references:
            <ul>
                <li>LazyStackAuth</li>
                <li>PetStoreClientSDK</li>
            </ul>
        </li>
        <li>Add the following package references:
            <ul>
                <li>Microsoft.Extensions.Configuration.UserSecrets</li>
                <li>Microsoft.Extensions.DependencyInjection</li>
            </ul>
        </li>
        
        <li>Add embedded AwsSettings.json resource.
            <ol type="a">
                <li>Double Click on the PetStoreTests project in the Solution Explorer. The csproj file opens in an 
                    editor tab.</li>
                <li>Insert the following Item Group into the csproj file.
                    <pre><code class="language-xml">
  &lt;ItemGroup>
    &lt;EmbeddedResource Include="..\Stacks\Dev\AwsSettings.json" />
  &lt;/ItemGroup>                        
                    </code></pre>
                </li>
                <li>Save the file.</li>
            </ol>
        </li>
    </ol>
    <h4>Configure a Gmail Account</h4>
    <ol>
        <li>Add the Microsoft.Extensions.Configuration.UserSecrets package.</li>
        <li>Create a new Gmail account. The test suite needs a Gmail account it can send verification codes to. We suggest
            you create a Gmail account just for this purpose and not use any existing Gmail account.</li>
        <li>Open your Google Account Settings.</li>
        <li>Select Security from menu.</li>
        <li>Select "Less secure app access" and turn on access.</li>
    </ol>
    <h4>Configure Visual Studio Secrets</h4>
    <ol>
        <li>Right Click on PetStoreTest project in solution explorer. The Context Menu appears.</li>
        <li>Select "Manage User Secrets". A secrets.json editor tab opens.</li>
        <li>Enter your Gmail credentials in this format: <br/>
<pre><code class="language-json">{
    "Gmail": {
    "Email": "myemail@gmail.com",
    "Password": "mypassword"
    }
}</code></pre>
        </li>
        <li>Save your edits.</li>
        </li>
    </ol>
    <p></p>
    
    <h4>Implement Tests</h4>
    <ol>
        <li>Delete the PetStoreTests UnitTest1.cs file.</li>
        <li>Download <a href="../assets/PetStoreIntegrationTest.cs" download>PetStoreIntegrationTest.cs</a> and 
            then move it into the PetStoreTests project.</li>
    </ol>
    <h4>Run Tests</h4>
    <ol>
        <li>Select View &RightArrow; Test Explorer. The Test Explorer panel appears.</li>
        <li>Run Tests. The integration test completes successfully.</li>
    </ol>
    <h4>Step Summary</h4>
    <p>In this step we created a Integration test project and ran our first tests against 
        the published stack.
    </p>
    <p>Reviewing the contents of the PetStoreIntegrationTest.cs class may yield valuable 
        insights into how you should use the libraries in your client apps. Take note of the 
    following implementation elements:</p>
    <ul>
        <li><a href="/clientsdk/clientsdk_awssettings.html">AwsSettings.json</a> is an embedded resource that is loaded by ConfigurationBuilder. This embedded resource 
            references \Stacks\Dev\AwsSettings.json. In a client app, you would introduce condition logic in the 
            csproj file to use \Stacks\Prod\AwsSettings.json for release builds or just distribute the AwsSettings.json 
            file separately to developers using the PetStoreClientSDK.
        </li>
        <li><a href="/libraries/lazystackauth/lazystackauth_authmessages.html">AuthMessages.json</a> is a embedded resource that is loaded by ConfigurationBuilder. Extend 
            this file with new message sets by language to localize the messages emitted by the AuthProcess class.
            This test does not demonstrate the use of AuthProcess messages but later Tutorial steps will.
        </li>
        <li>Dependency injection is used in this test to demonstrate the service registration of 
            IAuthProcess and IAuthProvider. 
        </li>
        <li>This test only exercises the simple Happy Path SignUp and SignIn process. If you want 
            to see much more extensive integration tests for AuthProcess, view the LazyStack solution 
            on GitHub. Also read the <a href="/libraries/lazystackauth/lazystackauth_lazystackauth.html">LazyStackAuth</a> documentation for 
            more details.
        </li>
        <li>The <a href="/libraries/lazystackauth/lazystackauth_lzhttpclient.html">LzHttpClient</a> class implements the logic necessary for 
            your client to make secure calls to the AWS Stack ApiGateways. The LzHttpClient class uses the Aws, LoadApis and 
            MethodMap sections in the appConfig.
        </li>
    </ul>
    <p></p>
</div>
            <div id=hacky-privacy-spacer></div>
            <script src="../assets/js/app.js"></script>
            <script src="../assets/prism/prism.js"></script>
 
        </div>
    </div>

</body>

</html>